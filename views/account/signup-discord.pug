extends ../layout

block content
    div.row.justify-content-center.my-5.mx-1
        div
            div.card
                div.card-body
                    h5.card-title Sign up with Discord
                    if retry
                        div.alert.alert-danger Sorry, your authentication code 
                            | is invalid. Please try again by clicking 
                            | #[a(href='/auth/discord') this link].
                    else if error
                        div.alert.alert-danger=error
                    else
                        div.alert.alert-success=`Hi ${discordName}#${discordDiscriminator}. Please choose a username to use on this site.`
                    if !retry
                        form(method='post' action='/auth/discord?' + redirectQuery)
                            input(type='hidden' name='chooseUsername' value='true')
                            div.form-group
                                label(for='username') Username
                                input(type='text' placeholder='Username' name='username' value=(formContents.username || discordName)).form-control#username
                            button(type='submit').btn.btn-primary Sign up

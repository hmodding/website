extends layout

prepend pageVariables
    - title = 'Download'

append alerts
    if (!newBranding)
        div(role='alert').alert.alert-warning
            | Unfortunately, we are now longer allowed to host the binary
            |  executables of RaftModLoader. All download links for the loader
            |  will lead you to the original website for the Raft mod loader.
    if userIsAdmin
        div(role='alert').alert.alert-info #[i.fas.fa-plus.mr-2] As an admin you can #[a(href='/loader/add') add a new mod loader version] to this list.

block content
    section.my-3
        h1 Downloads for RaftModLoader
        .row.justify-content-center.mt-3.mb-5
            .card.bg-light
                .card-header Download latest
                .card-body.mx-3
                    if versions.length === 0
                        p Sorry, there haven't been uploaded any versions of 
                            |  the mod loader yet.
                    else
                        p #[b ModLoader #{versions[0].rmlVersion}] for #[b Raft #{versions[0].raftVersion}]
                        a(href=`/loader/${versions[0].rmlVersion}/download`).btn.btn-primary.download-link Download
                        | 
                        a(href=`/loader/${versions[0].rmlVersion}`).btn.btn-outline-secondary View changelog
    section.my-3
        h2 Get some mods
        ul
            li You can find tons of other mods in the #[a(href='/mods') mods directory].
            li Want to create your own mods? Check out our #[a(href='/docs') API documentation].
    section.my-3
        h2 Other Versions
        p Below you can find a list of all versions of the mod loader. It is
            |  recommended to use the latest version which is presented above,
            |  but if you need a specific version, you can find it below.
            br
            .wide-content
                table.table.table-hover
                    thead.thead-light
                        tr
                            th(scope='col') ModLoader Version
                            th(scope='col') Raft Version
                            th(scope='col') Release date
                            th(scope='col') Download
                            th(scope='col') Release page
                    tbody
                        each ver, index in versions
                            tr(class=(index === 0 ? 'table-success' : ''))
                                th(scope='row')=ver.rmlVersion
                                td=ver.raftVersion
                                td=new Date(ver.timestamp).toISOString().split('T')[0]
                                td
                                    a(href=`/loader/${ver.rmlVersion}/download`)
                                        //- indicates a download from this site
                                        if !ver.downloadUrl.startsWith('/loader')
                                            i.fas.fa-external-link-square-alt.mx-1
                                        | Download
                                td
                                    a(href='/loader/' + ver.rmlVersion) Link
    if !newBranding
        include download-warning/mixins
        +download-warning-modal()